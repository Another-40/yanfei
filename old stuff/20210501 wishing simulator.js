let pity = 0; // What is the pity rate? Acceptable range is from 0 to 89 (0 is no history, 89 is guaranteed to be a 5* weapon or character)
let fours = 0; // What is the four stars pity rate? Acceptable range is from 0 to 9, 9 is guaranteed to be a 4* or a 5* weapon or character)
let wishes = 90; // How many wishes we'll be looking for?
let stardust = 0; // How many stardusts do you have in your inventory?
let primogems = 160; // How many primogems will it costs per each wish?
let starglitter = 0; // How many starglitters do you have in your inventory?

let random = Math.floor(Math.random() * 11); // Do not touch this, only edit if you know what you are doing!
let showing = false; // 3* weapons logging are disabled, set this to true if you want to know the full logging information!

let rating = require("../rating.json") // Loads pity ratings
let three = require("../default.json") // Loads 3 stars weapons
let four = require("./four.json") // Loads 4 stars weapons and characters
let five = require("./five.json") // Loads 5 stars weapons and characters

if (pity == 0) {
    pity = ++pity;
    wishSimulator(pity, wishes)
}

if (pity == 1) {
    pity == ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 2) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 3) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 4) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 5) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 6) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 7) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 8) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 9) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 10) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 11) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 12) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 13) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 14) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 15) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 16) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 17) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 18) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes, rating.s)
}

if (pity == 19) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 20) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 21) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 22) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 23) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 24) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 25) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 26) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 27) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 28) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 29) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 30) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 31) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 32) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 33) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 34) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 35) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 36) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 37) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 38) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 39) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 40) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 41) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 42) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 43) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 44) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 45) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 46) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 47) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 48) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 49) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 50) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 51) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 52) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 53) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 54) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 55) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 56) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 57) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 58) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 59) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 60) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 61) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 62) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 63) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 64) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 65) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 66) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 67) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 68) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 69) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 70) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 71) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 72) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 73) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 74) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 75) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 76) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 77) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 78) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 79) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 80) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 81) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 82) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 83) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 84) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 85) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 86) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 87) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 88) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

if (pity == 89) {
    pity = ++pity;
    wishes = --wishes;
    wishSimulator(pity, wishes)
}

function wishSimulator(pity, wishes) {
    if (wishes >= 1) {
        if ((100 - rating.rating[pity]) > (Math.random() * 100).toFixed(3)) {
            if (random > 9 || fours == 9) {
                fours = 0;
                starglitter = starglitter +2;
                random = Math.floor(Math.random() * 11)
                console.log("Lucky! You have won: " + Object.values(four)[parseInt(Math.random() * Object.values(four).length)])
                console.log("You have used a total of " + primogems * pity + " primogems. (#" + pity + ") (+" + stardust + " stardusts and +" + starglitter + " starglitters)\n")
            } else if (random < 10) {
                fours = ++fours;
                stardust = stardust +15;
                random = Math.floor(Math.random() * 11)
                if (showing == true) {
                    console.log("Unfortunately. You have won: " + Object.values(three)[parseInt(Math.random() * Object.values(three).length)])
                    console.log("You have used a total of " + primogems * pity + " primogems. (+" + stardust + " stardusts and +" + starglitter + " starglitters)\n")
                }
            }
        } else {
            console.log("Congratulations! You have won: " + Object.values(five)[parseInt(Math.random() * Object.values(five).length)])
            console.log("You have used a total of " + primogems * pity + " primogems. (#" + pity + ") (+" + stardust + " stardusts and +" + starglitter + " starglitters)\n")
            process.exit();
        }
    }
}